<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CleanSA - Mi Perfil</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'smoke-white': '#F9FAFB',        // Blanco humo (fondo general)
                        'pro-blue': '#2563EB',           // Azul profesional (elementos principales)
                        'light-blue': '#60A5FA',         // Azul claro (suavizar elementos)
                        'soft-gray': '#94A3B8',          // Gris suave (equilibrio neutral)
                        'warm-green': '#22C55E',         // Verde cálido (acentos positivos)
                        'light-teal': '#06B6D4',         // Turquesa claro (variedad)
                        'dark-teal': '#1E3A8A',          // Azul petróleo (solo acentos mínimos)
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="../static/css/nav-liquid-glass.css">
</head>
<body class="bg-smoke-white min-h-screen">
    
    <!-- Include Navigation Component -->
    {% include 'components/nav.html' %}

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-8 max-w-6xl">
        
        <!-- Header del Perfil -->
        <div class="bg-white rounded-xl shadow-lg overflow-hidden mb-8">
            <div class="bg-gradient-to-r from-pro-blue to-light-teal p-8 text-white">
                <div class="flex flex-col md:flex-row items-center">
                    <!-- Avatar -->
                    <div class="relative mb-6 md:mb-0 md:mr-8">
                        <svg class="w-32 h-32 bg-white bg-opacity-20 rounded-full flex items-center justify-center text-6xl font-bold">
                            {{ current_user.nombre[0].upper() }}    
                        </svg>
                        <button class="absolute bottom-0 right-0 bg-warm-green hover:bg-green-600 rounded-full p-2 shadow-lg transition-colors">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 7h-6v13h-2v-6h-2v6H9V9H3V7h18v2z"/>
                            </svg>
                        </button>
                    </div>
                    
                    <!-- Información Principal -->
                    <div class="text-center md:text-left flex-1">
                        <h1 class="text-4xl font-bold mb-2">{{ current_user.nombre }}</h1>
                        {% if current_user.es_particular %}
                        <p class="text-xl opacity-90 mb-4">Cliente tipo: Particular</p>
                        {% endif %}
                        {% if current_user.es_empresa %}
                        <p class="text-xl opacity-90 mb-4">Cliente tipo: Empresa</p>
                        {% endif %}
                        <div class="flex flex-wrap justify-center md:justify-start gap-4 text-sm">
                            <div class="flex items-center bg-white bg-opacity-20 rounded-full px-4 py-2">
                                
                                {{ current_user.direccion }}
                            </div>
                            <div class="flex items-center bg-white bg-opacity-20 rounded-full px-4 py-2">
                                
                                {{ current_user.dni }}
                            </div>
                            <div class="flex items-center bg-white bg-opacity-20 rounded-full px-4 py-2">
                                <div class="w-3 h-3 bg-warm-green rounded-full mr-2"></div>
                                Activo
                            </div>
                        </div>
                    </div>
                    
                        <div id="shop" class="mt-6 md:mt-0 flex flex-col gap-2">
                   
                        <a href="{{ url_for('users.carrito') }}" class="bg-white bg-opacity-20 hover:bg-white hover:bg-opacity-30 text-white px-6 py-2 rounded-lg transition-all duration-200 flex items-center">
                            <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M7 18c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12L8.1 13h7.45c.75 0 1.41-.41 1.75-1.03L21.7 4H5.21l-.94-2H1zm16 16c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                            </svg>
                            Carrito
                        </a>
                    </div>

                    
                 
                    
                </div>
            </div>
        </div>

        <!-- Dashboard de Estadísticas Personales -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            
            <!-- Pedidos Realizados -->
            <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-pro-blue">
                <div class="flex items-center">
                    <div class="bg-pro-blue bg-opacity-10 rounded-full p-3 mr-4">
                        <svg class="w-8 h-8 text-pro-blue" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 7H18V6C18 5.45 17.55 5 17 5H7C6.45 5 6 5.45 6 6V7H5C3.9 7 3 7.9 3 9V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V9C21 7.9 20.1 7 19 7Z"/>
                        </svg>
                    </div>
                    <div>
                        <p class="text-3xl font-bold text-dark-teal">12</p>
                        <p class="text-soft-gray text-sm">Pedidos Realizados</p>
                    </div>
                </div>
            </div>

            <!-- Total Gastado -->
            <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-warm-green">
                <div class="flex items-center">
                    <div class="bg-warm-green bg-opacity-10 rounded-full p-3 mr-4">
                        <svg class="w-8 h-8 text-warm-green" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                        </svg>
                    </div>
                    <div>
                        <p class="text-3xl font-bold text-dark-teal">$45,250</p>
                        <p class="text-soft-gray text-sm">Total en Compras</p>
                    </div>
                </div>
            </div>

            <!-- Puntos de Fidelidad -->
            <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-light-teal">
                <div class="flex items-center">
                    <div class="bg-light-teal bg-opacity-10 rounded-full p-3 mr-4">
                        <svg class="w-8 h-8 text-light-teal" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                    </div>
                    <div>
                        <p class="text-3xl font-bold text-dark-teal">2,850</p>
                        <p class="text-soft-gray text-sm">Puntos CleanSA</p>
                    </div>
                </div>
            </div>

            <!-- Último Acceso -->
            <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-light-blue">
                <div class="flex items-center">
                    <div class="bg-light-blue bg-opacity-10 rounded-full p-3 mr-4">
                        <svg class="w-8 h-8 text-light-blue" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>
                            <path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
                        </svg>
                    </div>
                    <div>
                        <p class="text-lg font-bold text-dark-teal">16 Oct</p>
                        <p class="text-soft-gray text-sm">Último Acceso</p>
                    </div>
                </div>
            </div>

        </div>

        <!-- Contenido Principal con Tabs -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <!-- Información Personal -->
            <div class="lg:col-span-2">
                <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                    
                    <!-- Tabs Header -->
                    <div class="border-b border-gray-200">
                        <nav class="flex">
                            <button class="tab-button active px-6 py-4 text-sm font-medium border-b-2 border-pro-blue text-pro-blue" 
                                    onclick="switchTab('info')">
                                Información Personal
                            </button>
                            <button class="tab-button px-6 py-4 text-sm font-medium border-b-2 border-transparent text-soft-gray hover:text-pro-blue" 
                                    onclick="switchTab('pedidos')">
                                Historial de Pedidos
                            </button>
                            <button class="tab-button px-6 py-4 text-sm font-medium border-b-2 border-transparent text-soft-gray hover:text-pro-blue" 
                                    onclick="switchTab('seguridad')">
                                Seguridad
                            </button>
                        </nav>
                    </div>

                    <!-- Tab Content: Información Personal -->
                    <div id="tab-info" class="tab-content p-6">
                        <h3 class="text-xl font-bold text-dark-teal mb-6">Datos Personales</h3>
                        
                        <form class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-dark-teal mb-2">Nombre Completo</label>
                                    <input type="text" value="Franco Gaggero" 
                                           class="w-full border border-soft-gray rounded-lg px-4 py-3 focus:ring-2 focus:ring-pro-blue bg-smoke-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-dark-teal mb-2">Email</label>
                                    <input type="email" value="franco@cleansa.com" 
                                           class="w-full border border-soft-gray rounded-lg px-4 py-3 focus:ring-2 focus:ring-pro-blue bg-smoke-white">
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-dark-teal mb-2">Teléfono</label>
                                    <input type="tel" value="+54 11 1234-5678" 
                                           class="w-full border border-soft-gray rounded-lg px-4 py-3 focus:ring-2 focus:ring-pro-blue bg-smoke-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-dark-teal mb-2">Fecha de Nacimiento</label>
                                    <input type="date" value="1990-05-15" 
                                           class="w-full border border-soft-gray rounded-lg px-4 py-3 focus:ring-2 focus:ring-pro-blue bg-smoke-white">
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-dark-teal mb-2">Dirección</label>
                                <input type="text" value="Av. Corrientes 1234, CABA, Argentina" 
                                       class="w-full border border-soft-gray rounded-lg px-4 py-3 focus:ring-2 focus:ring-pro-blue bg-smoke-white">
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-dark-teal mb-2">Empresa</label>
                                    <input type="text" value="CleanSA" 
                                           class="w-full border border-soft-gray rounded-lg px-4 py-3 focus:ring-2 focus:ring-pro-blue bg-gray-100" readonly>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-dark-teal mb-2">Puesto</label>
                                    <input type="text" value="Administrador General" 
                                           class="w-full border border-soft-gray rounded-lg px-4 py-3 focus:ring-2 focus:ring-pro-blue bg-gray-100" readonly>
                                </div>
                            </div>
                            
                            <div class="flex justify-end pt-4">
                                <button type="submit" 
                                        class="bg-pro-blue hover:bg-dark-teal text-white px-8 py-3 rounded-lg font-semibold transition-colors shadow-lg">
                                    Guardar Cambios
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Tab Content: Historial de Pedidos -->
                    <div id="tab-pedidos" class="tab-content p-6 hidden">
                        <h3 class="text-xl font-bold text-dark-teal mb-6">Mis Pedidos Recientes</h3>
                        
                        <div class="space-y-4">
                            {% for pedido in pedidos %}
                            <div class="border border-soft-gray rounded-lg p-4 hover:bg-smoke-white transition-colors">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center">
                                        <div class="bg-pro-blue rounded-full w-10 h-10 flex items-center justify-center mr-3">
                                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
                                                <path d="M19 7H18V6C18 5.45 17.55 5 17 5H7C6.45 5 6 5.45 6 6V7H5C3.9 7 3 7.9 3 9V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V9C21 7.9 20.1 7 19 7Z"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <p class="font-semibold text-dark-teal">Pedido {{ pedido.id }}</p>
                                            <p class="text-sm text-soft-gray">{{ pedido.fecha }}</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-lg font-bold text-warm-green">${{ "{:,.2f}".format(pedido.total) }}</p>
                                        <span class="{% if pedido.estado == 'Entregado' %}bg-warm-green bg-opacity-10 text-warm-green{% elif pedido.estado == 'En Proceso' %}bg-light-blue bg-opacity-10 text-light-blue{% else %}bg-soft-gray bg-opacity-10 text-soft-gray{% endif %} px-3 py-1 rounded-full text-xs font-medium">
                                            {{ pedido.estado }}
                                        </span>
                                    </div>
                                </div>
                                <div class="text-sm text-soft-gray">
                                    <strong>Productos:</strong> 
                                    {% for producto in pedido.productos %}
                                        {{ producto }}{% if not loop.last %}, {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Tab Content: Seguridad -->
                    <div id="tab-seguridad" class="tab-content p-6 hidden">
                        <h3 class="text-xl font-bold text-dark-teal mb-6">Configuración de Seguridad</h3>
                        
                        <div class="space-y-8">
                            <!-- Cambio de Contraseña -->
                            <div class="border border-soft-gray rounded-lg p-4">
                                <h4 class="text-lg font-semibold text-dark-teal mb-4">Cambiar Contraseña</h4>
                                <form class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-dark-teal mb-2">Contraseña Actual</label>
                                        <input type="password" 
                                               class="w-full border border-soft-gray rounded-lg px-4 py-3 focus:ring-2 focus:ring-pro-blue">
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-dark-teal mb-2">Nueva Contraseña</label>
                                            <input type="password" 
                                                   class="w-full border border-soft-gray rounded-lg px-4 py-3 focus:ring-2 focus:ring-pro-blue">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-dark-teal mb-2">Confirmar Contraseña</label>
                                            <input type="password" 
                                                   class="w-full border border-soft-gray rounded-lg px-4 py-3 focus:ring-2 focus:ring-pro-blue">
                                        </div>
                                    </div>
                                    <button type="submit" 
                                            class="bg-pro-blue hover:bg-dark-teal text-white px-6 py-2 rounded-lg font-semibold transition-colors">
                                        Actualizar Contraseña
                                    </button>
                                </form>
                            </div>

                            <!-- Información de Sesión -->
                            <div class="border border-soft-gray rounded-lg p-4">
                                <h4 class="text-lg font-semibold text-dark-teal mb-4">Información de Sesión</h4>
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center">
                                        <span class="text-soft-gray">Último acceso:</span>
                                        <span class="font-medium text-dark-teal">2024-12-16 14:30</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-soft-gray">Miembro desde:</span>
                                        <span class="font-medium text-dark-teal">2024-01-15</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-soft-gray">Estado de la cuenta:</span>
                                        <span class="bg-warm-green bg-opacity-10 text-warm-green px-3 py-1 rounded-full text-sm font-medium">
                                            Activo
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar con Información Adicional -->
            <div class="space-y-6">
                
                <!-- Programa de Fidelidad -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-bold text-dark-teal mb-4 flex items-center">
                        <svg class="w-5 h-5 mr-2 text-light-teal" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                        Programa CleanSA Plus
                    </h3>
                    <div class="text-center">
                        <div class="bg-gradient-to-r from-light-teal to-pro-blue rounded-lg p-4 text-white mb-4">
                            <p class="text-3xl font-bold">2,850</p>
                            <p class="text-sm opacity-90">Puntos Disponibles</p>
                        </div>
                        <p class="text-sm text-soft-gray mb-4">
                            Te faltan <strong>172 puntos</strong> para alcanzar el nivel <strong>Premium</strong>
                        </p>
                        <div class="w-full bg-gray-200 rounded-full h-3 mb-4">
                            <div class="bg-gradient-to-r from-light-teal to-pro-blue h-3 rounded-full" style="width: 66%"></div>
                        </div>
                        <button class="bg-light-teal hover:bg-pro-blue text-white px-4 py-2 rounded-lg text-sm transition-colors">
                            Canjear Puntos
                        </button>
                    </div>
                </div>

                <!-- Accesos Rápidos -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-bold text-dark-teal mb-4">Accesos Rápidos</h3>
                    <div class="space-y-3">
                        <a href="#" class="flex items-center p-3 bg-smoke-white rounded-lg hover:bg-gray-100 transition-colors">
                            <svg class="w-5 h-5 mr-3 text-pro-blue" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 7H18V6C18 5.45 17.55 5 17 5H7C6.45 5 6 5.45 6 6V7H5C3.9 7 3 7.9 3 9V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V9C21 7.9 20.1 7 19 7Z"/>
                            </svg>
                            <span class="text-dark-teal">Nuevo Pedido</span>
                        </a>
                        <a href="{{ url_for('products.list_products') }}" class="flex items-center p-3 bg-smoke-white rounded-lg hover:bg-gray-100 transition-colors">
                            <svg class="w-5 h-5 mr-3 text-warm-green" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2L13.09 7.26L18 4L14.74 9.09L20 10L14.74 10.91L18 16L13.09 12.74L12 18L10.91 12.74L6 16L9.26 10.91L4 10L9.26 9.09L6 4L10.91 7.26L12 2Z"/>
                            </svg>
                            <span class="text-dark-teal">Ver Catálogo</span>
                        </a>
                        <a href="#" class="flex items-center p-3 bg-smoke-white rounded-lg hover:bg-gray-100 transition-colors">
                            <svg class="w-5 h-5 mr-3 text-light-teal" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                            </svg>
                            <span class="text-dark-teal">Soporte Técnico</span>
                        </a>
                    </div>
                </div>

                <!-- Notificaciones -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-bold text-dark-teal mb-4">Notificaciones</h3>
                    <div class="space-y-3">
                        <div class="flex items-start p-3 bg-warm-green bg-opacity-10 rounded-lg">
                            <svg class="w-5 h-5 mr-3 text-warm-green mt-0.5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                            <div>
                                <p class="text-sm font-medium text-dark-teal">Pedido Entregado</p>
                                <p class="text-xs text-soft-gray">Tu pedido PED-2024-002 fue entregado exitosamente</p>
                            </div>
                        </div>
                        <div class="flex items-start p-3 bg-light-blue bg-opacity-10 rounded-lg">
                            <svg class="w-5 h-5 mr-3 text-light-blue mt-0.5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                            <div>
                                <p class="text-sm font-medium text-dark-teal">Puntos Ganados</p>
                                <p class="text-xs text-soft-gray">¡Ganaste 45 puntos por tu última compra!</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </main>

    <!-- Librerías externas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    
    <!-- Scripts de la aplicación -->
    <script src="{{ url_for('static', filename='js/carrito.js') }}"></script>

</body>
</html>
